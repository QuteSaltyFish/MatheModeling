function [dir,path,singledistance,edgepath] = CalDir(index)
	global sms;
	global allpeople;
	global d;
    global ends;
    global c;
    global CurrentEnd;
	obj = sms{allpeople{1,index}.position(1,3)};
	ld = d(obj.LeftNode, CurrentEnd);
    rd = d(obj.RightNode, CurrentEnd);   
    j = allpeople{1,index}.position(1,2);
    
    if allpeople{1,index}.phone %indicates that people will go to the hidden door
    end
    
    if allpeople{1,index}.foreign == 1
        if min(ld)+j-1+ allpeople{1,index}.phone * d> min(rd)+obj.Col-j
            dir = 1;
            fp = find(rd==min(rd),1);
            [path,distance,edgepath] = shortestpath(c,obj.RightNode, CurrentEnd(fp));
            singledistance = distance + obj.Col-j;
        else
            dir = -1;
            fp = find(ld==min(ld),1);
            [path,distance,edgepath] = shortestpath(c,obj.LeftNode, CurrentEnd(fp));
            singledistance = distance + j - 1 ;
        end
    else
        
        
end

